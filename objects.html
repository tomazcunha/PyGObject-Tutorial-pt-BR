

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>21. Objects &mdash; documentação Python GTK+ 3 Tutorial 3.4</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Índice"
              href="genindex.html"/>
        <link rel="search" title="Buscar" href="search.html"/>
    <link rel="top" title="documentação Python GTK+ 3 Tutorial 3.4" href="index.html"/>
        <link rel="next" title="22. Aplicação" href="application.html"/>
        <link rel="prev" title="20. Glade e Gtk.Builder" href="builder.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Python GTK+ 3 Tutorial
          

          
          </a>

          
            
            
              <div class="version">
                3.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">1. Instalação</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">2. Começando</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">3. Noções básicas</a></li>
<li class="toctree-l1"><a class="reference internal" href="unicode.html">4. Como Lidar com Sequências de Caracteres</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">5. Containers de Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="label.html">6. Label</a></li>
<li class="toctree-l1"><a class="reference internal" href="entry.html">7. Entry</a></li>
<li class="toctree-l1"><a class="reference internal" href="button_widgets.html">8. Widgets de Botão</a></li>
<li class="toctree-l1"><a class="reference internal" href="progressbar.html">9. Barra de Progresso</a></li>
<li class="toctree-l1"><a class="reference internal" href="spinner.html">10. Spinner</a></li>
<li class="toctree-l1"><a class="reference internal" href="treeview.html">11. Widgets de Árvore e Lista</a></li>
<li class="toctree-l1"><a class="reference internal" href="cellrenderers.html">12. CellRenderers</a></li>
<li class="toctree-l1"><a class="reference internal" href="combobox.html">13. ComboBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="iconview.html">14. IconView</a></li>
<li class="toctree-l1"><a class="reference internal" href="textview.html">15. Editor de Texto Multilinha</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogs.html">16. Dialogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="popover.html">17. Popovers</a></li>
<li class="toctree-l1"><a class="reference internal" href="clipboard.html">18. Clipboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="drag_and_drop.html">19. Arraste e solte</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder.html">20. Glade e Gtk.Builder</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">21. Objects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#inherit-from-gobject-gobject">21.1. Herdar de GObject.GObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="#signals">21.2. Sinais</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#receive-signals">21.2.1. Receba sinais</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-new-signals">21.2.2. Crie novos sinais</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#properties">21.3. Propriedades</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#use-existing-properties">21.3.1. Use propriedades existentes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-new-properties">21.3.2. Crie novas propriedades</a></li>
<li class="toctree-l3"><a class="reference internal" href="#watch-properties">21.3.3. Veja as propriedades</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api">21.4. API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="application.html">22. Aplicação</a></li>
</ul>
<p class="caption"><span class="caption-text">Descontinuada</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="menus.html">Menus</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout-table.html">Tabela</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python GTK+ 3 Tutorial</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>21. Objects</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/objects.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="objects">
<span id="id1"></span><h1>21. Objects<a class="headerlink" href="#objects" title="Link permanente para este título">¶</a></h1>
<p>O GObject é o tipo fundamental que fornece os atributos e métodos comuns para todos os tipos de objeto no GTK+, no Pango e em outras bibliotecas baseadas no GObject. A classe <a class="reference internal" href="#GObject.GObject" title="GObject.GObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.GObject</span></code></a> fornece métodos para construção e destruição de objetos, métodos de acesso a propriedades e suporte a sinais.</p>
<p>Esta seção apresentará alguns aspectos importantes sobre a implementação do GObject no Python.</p>
<div class="section" id="inherit-from-gobject-gobject">
<h2>21.1. Herdar de GObject.GObject<a class="headerlink" href="#inherit-from-gobject-gobject" title="Link permanente para este título">¶</a></h2>
<p>Um GObject nativo é acessível via <a class="reference internal" href="#GObject.GObject" title="GObject.GObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.GObject</span></code></a>. É raramente instanciado diretamente, geralmente usamos classes herdadas. A <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/Widget.html#Gtk.Widget" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Widget</span></code></a> é uma classe herdada de um <a class="reference internal" href="#GObject.GObject" title="GObject.GObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.GObject</span></code></a>. Pode ser interessante criar uma classe herdada para criar um novo widget, como uma caixa de diálogo de configurações.</p>
<p>Para herdar de <a class="reference internal" href="#GObject.GObject" title="GObject.GObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.GObject</span></code></a>, você deve chamar <code class="xref py py-meth docutils literal notranslate"><span class="pre">GObject.GObject.__init__()</span></code> em seu construtor (se a classe herdar de <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/Button.html#Gtk.Button" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Button</span></code></a>, deve chamar <code class="xref py py-func docutils literal notranslate"><span class="pre">Gtk.Button.__init__()</span></code> por exemplo), como no exemplo abaixo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">GObject</span>

<span class="k">class</span> <span class="nc">MyObject</span><span class="p">(</span><span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="signals">
<h2>21.2. Sinais<a class="headerlink" href="#signals" title="Link permanente para este título">¶</a></h2>
<p>Os sinais conectam eventos específicos de aplicativos arbitrários com qualquer número de ouvintes. Por exemplo, no GTK+, cada evento de usuário (pressionamento de tecla ou mouse) é recebido do servidor X e gera um evento GTK+ sob a forma de uma emissão de sinal em uma determinada instância de objeto.</p>
<p>Cada sinal é registrado no sistema de tipos junto com o tipo no qual ele pode ser emitido: os usuários do tipo são conectados ao sinal em uma determinada instância de tipo quando registram uma função a ser invocada na emissão do sinal. Os usuários também podem emitir o sinal sozinhos ou interromper a emissão do sinal de dentro de uma das funções conectadas ao sinal.</p>
<div class="section" id="receive-signals">
<h3>21.2.1. Receba sinais<a class="headerlink" href="#receive-signals" title="Link permanente para este título">¶</a></h3>
<p>Veja <a class="reference internal" href="basics.html#signals"><span class="std std-ref">Loop principal e sinais</span></a></p>
</div>
<div class="section" id="create-new-signals">
<h3>21.2.2. Crie novos sinais<a class="headerlink" href="#create-new-signals" title="Link permanente para este título">¶</a></h3>
<p>Novos sinais podem ser criados adicionando-os a <a class="reference internal" href="#GObject.GObject.__gsignals__" title="GObject.GObject.__gsignals__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GObject.GObject.__gsignals__</span></code></a>, um dicionário:</p>
<p>Quando um novo sinal é criado, um manipulador de método também pode ser definido, ele será chamado toda vez que o sinal for emitido. É chamado do_signal_name.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyObject</span><span class="p">(</span><span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="p">):</span>
    <span class="n">__gsignals__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;my_signal&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">GObject</span><span class="o">.</span><span class="n">SIGNAL_RUN_FIRST</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span>
                      <span class="p">(</span><span class="nb">int</span><span class="p">,))</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">do_my_signal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;class method for `my_signal&#39; called with argument&quot;</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="#GObject.SIGNAL_RUN_FIRST" title="GObject.SIGNAL_RUN_FIRST"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.SIGNAL_RUN_FIRST</span></code></a> indica que este sinal invocará o manipulador do método de objeto (<code class="xref py py-meth docutils literal notranslate"><span class="pre">do_my_signal()</span></code> aqui) no primeiro estágio de emissão. As alternativas são <a class="reference internal" href="#GObject.SIGNAL_RUN_LAST" title="GObject.SIGNAL_RUN_LAST"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.SIGNAL_RUN_LAST</span></code></a> (o manipulador de método será invocado no terceiro estágio de emissão) e <a class="reference internal" href="#GObject.SIGNAL_RUN_CLEANUP" title="GObject.SIGNAL_RUN_CLEANUP"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.SIGNAL_RUN_CLEANUP</span></code></a> (invoca o manipulador de método no último estágio de emissão).</p>
<p>A segunda parte, <code class="docutils literal notranslate"><span class="pre">None</span></code>, indica o tipo de retorno do sinal, geralmente <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">(int,)</span></code> indica os argumentos do sinal, aqui, o sinal só receberá um argumento, cujo tipo é int. Essa lista de tipos de argumentos deve terminar com uma vírgula.</p>
<p>Os sinais podem ser emitidos usando <a class="reference internal" href="#GObject.GObject.emit" title="GObject.GObject.emit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GObject.GObject.emit()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_obj</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;my_signal&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span> <span class="c1"># emit the signal &quot;my_signal&quot;, with the</span>
                             <span class="c1"># argument 42</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="properties">
<h2>21.3. Propriedades<a class="headerlink" href="#properties" title="Link permanente para este título">¶</a></h2>
<p>Um dos ótimos recursos do GObject é seu mecanismo get/set genérico para propriedades de objetos. Cada classe herdada de <a class="reference internal" href="#GObject.GObject" title="GObject.GObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.GObject</span></code></a> pode definir novas propriedades. Cada propriedade tem um tipo que nunca muda (por exemplo, str, float, int …). Por exemplo, eles são usados para <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/Button.html#Gtk.Button" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Button</span></code></a> onde existe uma propriedade “label” que contém o texto do botão.</p>
<div class="section" id="use-existing-properties">
<h3>21.3.1. Use propriedades existentes<a class="headerlink" href="#use-existing-properties" title="Link permanente para este título">¶</a></h3>
<p>A classe <a class="reference internal" href="#GObject.GObject" title="GObject.GObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.GObject</span></code></a> fornece várias funções úteis para gerenciar propriedades existentes, <a class="reference internal" href="#GObject.GObject.get_property" title="GObject.GObject.get_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">GObject.GObject.get_property()</span></code></a> e <a class="reference internal" href="#GObject.GObject.set_property" title="GObject.GObject.set_property"><code class="xref py py-func docutils literal notranslate"><span class="pre">GObject.GObject.set_property()</span></code></a>.</p>
<p>Algumas propriedades também possuem funções dedicadas a elas, chamadas de getter e setter. Para a propriedade “label” de um botão, existem duas funções para obter e configurá-las, <code class="xref py py-func docutils literal notranslate"><span class="pre">Gtk.Button.get_label()</span></code> e <code class="xref py py-func docutils literal notranslate"><span class="pre">Gtk.Button.set_label()</span></code>.</p>
</div>
<div class="section" id="create-new-properties">
<h3>21.3.2. Crie novas propriedades<a class="headerlink" href="#create-new-properties" title="Link permanente para este título">¶</a></h3>
<p>Uma propriedade é definida com um nome e um tipo. Mesmo se o próprio Python for digitado dinamicamente, você não poderá alterar o tipo de uma propriedade depois que ela for definida. Uma propriedade pode ser criada usando <code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.Property</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">GObject</span>

<span class="k">class</span> <span class="nc">MyObject</span><span class="p">(</span><span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="p">):</span>

    <span class="n">foo</span> <span class="o">=</span> <span class="n">GObject</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
    <span class="n">property_float</span> <span class="o">=</span> <span class="n">GObject</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>As propriedades também podem ser somente leitura, se você quiser que algumas propriedades sejam legíveis, mas não graváveis. Para fazer isso, você pode adicionar alguns sinalizadores à definição da propriedade, para controlar o acesso de leitura/gravação. Sinalizadores são <a class="reference internal" href="#GObject.ParamFlags.READABLE" title="GObject.ParamFlags.READABLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.ParamFlags.READABLE</span></code></a> (somente acesso de leitura para código externo), <a class="reference internal" href="#GObject.ParamFlags.WRITABLE" title="GObject.ParamFlags.WRITABLE"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.ParamFlags.WRITABLE</span></code></a> (somente acesso de gravação), <a class="reference internal" href="#GObject.ParamFlags.READWRITE" title="GObject.ParamFlags.READWRITE"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.ParamFlags.READWRITE</span></code></a> (publico):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span> <span class="o">=</span> <span class="n">GObject</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">flags</span> <span class="o">=</span> <span class="n">GObject</span><span class="o">.</span><span class="n">ParamFlags</span><span class="o">.</span><span class="n">READABLE</span><span class="p">)</span> <span class="c1"># not writable</span>
<span class="n">bar</span> <span class="o">=</span> <span class="n">GObject</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">flags</span> <span class="o">=</span> <span class="n">GObject</span><span class="o">.</span><span class="n">ParamFlags</span><span class="o">.</span><span class="n">WRITABLE</span><span class="p">)</span> <span class="c1"># not readable</span>
</pre></div>
</div>
<p>Você também pode definir novas propriedades somente leitura com um novo método decorado com <code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.Property</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">GObject</span>

<span class="k">class</span> <span class="nc">MyObject</span><span class="p">(</span><span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@GObject.Property</span>
    <span class="k">def</span> <span class="nf">readonly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;This is read-only.&#39;</span>
</pre></div>
</div>
<p>Você pode obter essa propriedade usando:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_object</span> <span class="o">=</span> <span class="n">MyObject</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">my_object</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s2">&quot;readonly&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>A API de <code class="xref py py-class docutils literal notranslate"><span class="pre">GObject.Property</span></code> é semelhante ao construído em <code class="xref py py-func docutils literal notranslate"><span class="pre">property()</span></code>. Você pode criar o setter de propriedades de maneira semelhante à propriedade Python:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AnotherObject</span><span class="p">(</span><span class="n">GObject</span><span class="o">.</span><span class="n">Object</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@GObject.Property</span>
    <span class="k">def</span> <span class="nf">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Read only property.&#39;</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="nd">@GObject.Property</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">propInt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s1">&#39;Read-write integer property.&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

    <span class="nd">@propInt.setter</span>
    <span class="k">def</span> <span class="nf">propInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
<p>Há também uma maneira de definir valores mínimos e máximos para números, usando um formulário mais detalhado:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="kn">import</span> <span class="n">GObject</span>

<span class="k">class</span> <span class="nc">MyObject</span><span class="p">(</span><span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="p">):</span>

    <span class="n">__gproperties__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;int-prop&quot;</span><span class="p">:</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="c1"># type</span>
                     <span class="s2">&quot;integer prop&quot;</span><span class="p">,</span> <span class="c1"># nick</span>
                     <span class="s2">&quot;A property that contains an integer&quot;</span><span class="p">,</span> <span class="c1"># blurb</span>
                     <span class="mi">1</span><span class="p">,</span> <span class="c1"># min</span>
                     <span class="mi">5</span><span class="p">,</span> <span class="c1"># max</span>
                     <span class="mi">2</span><span class="p">,</span> <span class="c1"># default</span>
                     <span class="n">GObject</span><span class="o">.</span><span class="n">ParamFlags</span><span class="o">.</span><span class="n">READWRITE</span> <span class="c1"># flags</span>
                    <span class="p">),</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GObject</span><span class="o">.</span><span class="n">GObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">int_prop</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="k">def</span> <span class="nf">do_get_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;int-prop&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">int_prop</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s1">&#39;unknown property </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">prop</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_set_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;int-prop&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">int_prop</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s1">&#39;unknown property </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">prop</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>As propriedades devem ser definidas em <a class="reference internal" href="#GObject.GObject.__gproperties__" title="GObject.GObject.__gproperties__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GObject.GObject.__gproperties__</span></code></a>, um dicionário e manipulado em do_get_property e do_set_property.</p>
</div>
<div class="section" id="watch-properties">
<h3>21.3.3. Veja as propriedades<a class="headerlink" href="#watch-properties" title="Link permanente para este título">¶</a></h3>
<p>Quando uma propriedade é modificada, um sinal é emitido, cujo nome é “notify::property-name”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_object</span> <span class="o">=</span> <span class="n">MyObject</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">on_notify_foo</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">gparamstring</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;foo changed&quot;</span><span class="p">)</span>

<span class="n">my_object</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;notify::foo&quot;</span><span class="p">,</span> <span class="n">on_notify_foo</span><span class="p">)</span>

<span class="n">my_object</span><span class="o">.</span><span class="n">set_property</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">)</span> <span class="c1"># on_notify_foo will be called</span>
</pre></div>
</div>
<p>Note que você tem que usar o nome da propriedade canônica ao se conectar aos sinais de notificação, como explicado em <a class="reference external" href="https://lazka.github.io/pgi-docs/GObject-2.0/classes/Object.html#GObject.Object.signals.notify" title="(em GObject 2.0 v2.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">GObject.Object.signals.notify()</span></code></a>. Por exemplo, para uma propriedade Python <cite>foo_bar_baz</cite> você conectaria ao sinal <cite>notify::foo-bar-baz</cite> usando</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_object</span> <span class="o">=</span> <span class="n">MyObject</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">on_notify_foo_bar_baz</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">gparamstring</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;foo_bar_baz changed&quot;</span><span class="p">)</span>

<span class="n">my_object</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;notify::foo-bar-baz&quot;</span><span class="p">,</span> <span class="n">on_notify_foo_bar_baz</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="api">
<h2>21.4. API<a class="headerlink" href="#api" title="Link permanente para este título">¶</a></h2>
<dl class="class">
<dt id="GObject.GObject">
<em class="property">class </em><code class="descclassname">GObject.</code><code class="descname">GObject</code><a class="headerlink" href="#GObject.GObject" title="Link permanente para esta definição">¶</a></dt>
<dd><dl class="method">
<dt id="GObject.GObject.get_property">
<code class="descname">get_property</code><span class="sig-paren">(</span><em>property_name</em><span class="sig-paren">)</span><a class="headerlink" href="#GObject.GObject.get_property" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Recupera um valor de propriedade.</p>
</dd></dl>

<dl class="method">
<dt id="GObject.GObject.set_property">
<code class="descname">set_property</code><span class="sig-paren">(</span><em>property_name</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#GObject.GObject.set_property" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Configure a propriedade <em>property_name</em> para <em>valor</em>.</p>
</dd></dl>

<dl class="method">
<dt id="GObject.GObject.emit">
<code class="descname">emit</code><span class="sig-paren">(</span><em>signal_name</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#GObject.GObject.emit" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Emitir sinal <em>signal_name</em>. Argumentos de sinal devem seguir, por ex. se o seu sinal é do tipo <code class="docutils literal notranslate"><span class="pre">(int,)</span></code>, deve ser emitido com:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">signal_name</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="GObject.GObject.freeze_notify">
<code class="descname">freeze_notify</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GObject.GObject.freeze_notify" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Este método congela todos os sinais “notify::” (que são emitidos quando qualquer propriedade é alterada) até que o método <a class="reference internal" href="#GObject.GObject.thaw_notify" title="GObject.GObject.thaw_notify"><code class="xref py py-meth docutils literal notranslate"><span class="pre">thaw_notify()</span></code></a> seja chamado.</p>
<p>Recomenda-se usar a instrução <em>with</em> ao chamar <a class="reference internal" href="#GObject.GObject.freeze_notify" title="GObject.GObject.freeze_notify"><code class="xref py py-meth docutils literal notranslate"><span class="pre">freeze_notify()</span></code></a>, dessa forma é assegurado que <a class="reference internal" href="#GObject.GObject.thaw_notify" title="GObject.GObject.thaw_notify"><code class="xref py py-meth docutils literal notranslate"><span class="pre">thaw_notify()</span></code></a> é chamado implicitamente no final do bloco:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">an_object</span><span class="o">.</span><span class="n">freeze_notify</span><span class="p">():</span>
    <span class="c1"># Do your work here</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="GObject.GObject.thaw_notify">
<code class="descname">thaw_notify</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#GObject.GObject.thaw_notify" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Descongele todos os sinais “notify::” que foram descongelados por <a class="reference internal" href="#GObject.GObject.freeze_notify" title="GObject.GObject.freeze_notify"><code class="xref py py-meth docutils literal notranslate"><span class="pre">freeze_notify()</span></code></a>.</p>
<p>Recomenda-se não chamar <a class="reference internal" href="#GObject.GObject.thaw_notify" title="GObject.GObject.thaw_notify"><code class="xref py py-meth docutils literal notranslate"><span class="pre">thaw_notify()</span></code></a> explicitamente mas use <a class="reference internal" href="#GObject.GObject.freeze_notify" title="GObject.GObject.freeze_notify"><code class="xref py py-meth docutils literal notranslate"><span class="pre">freeze_notify()</span></code></a> juntamente com a instrução <em>with</em>.</p>
</dd></dl>

<dl class="method">
<dt id="GObject.GObject.handler_block">
<code class="descname">handler_block</code><span class="sig-paren">(</span><em>handler_id</em><span class="sig-paren">)</span><a class="headerlink" href="#GObject.GObject.handler_block" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Bloqueia um manipulador de uma instância para que ele não seja chamado durante qualquer emissão de sinal, a menos que <a class="reference internal" href="#GObject.GObject.handler_unblock" title="GObject.GObject.handler_unblock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handler_unblock()</span></code></a> seja chamado para aquele <em>handler_id</em>. Assim, “bloqueando” um manipulador de sinal significa desativá-lo temporariamente, um manipulador de sinal precisa ser desbloqueado exatamente na mesma quantidade de vezes que foi bloqueado antes de se tornar ativo novamente.</p>
<p>Recomenda-se usar <a class="reference internal" href="#GObject.GObject.handler_block" title="GObject.GObject.handler_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handler_block()</span></code></a> em conjunto com a instrução <em>with</em> que irá chamar <a class="reference internal" href="#GObject.GObject.handler_unblock" title="GObject.GObject.handler_unblock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handler_unblock()</span></code></a> implicitamente no final do bloco:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">an_object</span><span class="o">.</span><span class="n">handler_block</span><span class="p">(</span><span class="n">handler_id</span><span class="p">):</span>
    <span class="c1"># Do your work here</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="GObject.GObject.handler_unblock">
<code class="descname">handler_unblock</code><span class="sig-paren">(</span><em>handler_id</em><span class="sig-paren">)</span><a class="headerlink" href="#GObject.GObject.handler_unblock" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Desfaz o efeito de <a class="reference internal" href="#GObject.GObject.handler_block" title="GObject.GObject.handler_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handler_block()</span></code></a>. Um manipulador bloqueado é ignorado durante as emissões do sinal e não será chamado até que tenha sido desbloqueado exatamente a quantidade de vezes que foi bloqueado antes.</p>
<p>É recomendado não chamar explicitamente <a class="reference internal" href="#GObject.GObject.handler_unblock" title="GObject.GObject.handler_unblock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handler_unblock()</span></code></a> mas use <a class="reference internal" href="#GObject.GObject.handler_block" title="GObject.GObject.handler_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handler_block()</span></code></a> junto com a instrução <em>with</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="GObject.GObject.__gsignals__">
<code class="descname">__gsignals__</code><a class="headerlink" href="#GObject.GObject.__gsignals__" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Um dicionário onde a classe herdada pode definir novos sinais.</p>
<p>Cada elemento no dicionário é um novo sinal. A chave é o nome do sinal. O valor é uma tupla, com o formato:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">GObject</span><span class="o">.</span><span class="n">SIGNAL_RUN_FIRST</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,))</span>
</pre></div>
</div>
<p><a class="reference internal" href="#GObject.SIGNAL_RUN_FIRST" title="GObject.SIGNAL_RUN_FIRST"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.SIGNAL_RUN_FIRST</span></code></a> pode ser substituído por <a class="reference internal" href="#GObject.SIGNAL_RUN_LAST" title="GObject.SIGNAL_RUN_LAST"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.SIGNAL_RUN_LAST</span></code></a> ou <a class="reference internal" href="#GObject.SIGNAL_RUN_CLEANUP" title="GObject.SIGNAL_RUN_CLEANUP"><code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.SIGNAL_RUN_CLEANUP</span></code></a>. <code class="docutils literal notranslate"><span class="pre">None</span></code> é o tipo de retorno do sinal. <code class="docutils literal notranslate"><span class="pre">(int,)</span></code> é a lista dos parâmetros do sinal, deve terminar com uma vírgula.</p>
</dd></dl>

<dl class="attribute">
<dt id="GObject.GObject.__gproperties__">
<code class="descname">__gproperties__</code><a class="headerlink" href="#GObject.GObject.__gproperties__" title="Link permanente para esta definição">¶</a></dt>
<dd><p>O dicionário <a class="reference internal" href="#GObject.GObject.__gproperties__" title="GObject.GObject.__gproperties__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__gproperties__</span></code></a> é uma propriedade de classe onde você define as propriedades do seu objeto. Esta não é a maneira recomendada de definir novas propriedades, o método escrito acima é muito menos detalhado. Os benefícios desse método é que uma propriedade pode ser definida com mais configurações, como o mínimo ou o máximo para números.</p>
<p>A chave é o nome da propriedade</p>
<p>O valor é uma tupla que descreve a propriedade. O número de elementos dessa tupla depende de seu primeiro elemento, mas a tupla sempre conterá pelo menos os seguintes itens:</p>
<blockquote>
<div><p>O primeiro elemento é o tipo da propriedade (por exemplo, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>…).</p>
<p>O segundo elemento é o apelido da propriedade, que é uma string com uma breve descrição da propriedade. Isso geralmente é usado por programas com fortes recursos de introspecção, como o construtor de interface gráfica de usuário <a class="reference external" href="http://glade.gnome.org/">Glade</a>.</p>
<p>A terceira é a descrição da propriedade ou sinopse, que é outra string com uma descrição mais longa da propriedade. Também usado pelo <a class="reference external" href="http://glade.gnome.org/">Glade</a> e programas similares.</p>
<p>O último (que não é necessariamente o último, como veremos mais adiante) é o sinalizador da propriedade <code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.PARAM_READABLE</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.PARAM_WRITABLE</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">GObject.PARAM_READWRITE</span></code>.</p>
</div></blockquote>
<p>O comprimento absoluto da tupla depende do tipo de propriedade (o primeiro elemento da tupla). Assim, temos as seguintes situações:</p>
<blockquote>
<div><p>Se o tipo for <code class="docutils literal notranslate"><span class="pre">bool</span></code> ou <code class="docutils literal notranslate"><span class="pre">str</span></code>, o quarto elemento é o valor padrão da propriedade.</p>
<p>Se o tipo for <code class="docutils literal notranslate"><span class="pre">int</span></code> ou <code class="docutils literal notranslate"><span class="pre">float</span></code>, o quarto elemento é o valor mínimo aceito, o quinto elemento é o valor máximo aceito e o sexto elemento é o valor padrão.</p>
<p>Se o tipo não for um desses, não há elemento extra.</p>
</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="GObject.SIGNAL_RUN_FIRST">
<code class="descclassname">GObject.</code><code class="descname">SIGNAL_RUN_FIRST</code><a class="headerlink" href="#GObject.SIGNAL_RUN_FIRST" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Invoque o manipulador de método de objeto no primeiro estágio de emissão.</p>
</dd></dl>

<dl class="attribute">
<dt id="GObject.SIGNAL_RUN_LAST">
<code class="descclassname">GObject.</code><code class="descname">SIGNAL_RUN_LAST</code><a class="headerlink" href="#GObject.SIGNAL_RUN_LAST" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Invoque o manipulador de método de objeto no terceiro estágio de emissão.</p>
</dd></dl>

<dl class="attribute">
<dt id="GObject.SIGNAL_RUN_CLEANUP">
<code class="descclassname">GObject.</code><code class="descname">SIGNAL_RUN_CLEANUP</code><a class="headerlink" href="#GObject.SIGNAL_RUN_CLEANUP" title="Link permanente para esta definição">¶</a></dt>
<dd><p>Invoque o manipulador do método de objeto no último estágio de emissão.</p>
</dd></dl>

<dl class="attribute">
<dt id="GObject.ParamFlags.READABLE">
<code class="descclassname">GObject.ParamFlags.</code><code class="descname">READABLE</code><a class="headerlink" href="#GObject.ParamFlags.READABLE" title="Link permanente para esta definição">¶</a></dt>
<dd><p>A propriedade é legível.</p>
</dd></dl>

<dl class="attribute">
<dt id="GObject.ParamFlags.WRITABLE">
<code class="descclassname">GObject.ParamFlags.</code><code class="descname">WRITABLE</code><a class="headerlink" href="#GObject.ParamFlags.WRITABLE" title="Link permanente para esta definição">¶</a></dt>
<dd><p>A propriedade é gravável.</p>
</dd></dl>

<dl class="attribute">
<dt id="GObject.ParamFlags.READWRITE">
<code class="descclassname">GObject.ParamFlags.</code><code class="descname">READWRITE</code><a class="headerlink" href="#GObject.ParamFlags.READWRITE" title="Link permanente para esta definição">¶</a></dt>
<dd><p>A propriedade é legível e gravável.</p>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="application.html" class="btn btn-neutral float-right" title="22. Aplicação" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="builder.html" class="btn btn-neutral" title="20. Glade e Gtk.Builder" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright GNU Free Documentation License 1.3.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>