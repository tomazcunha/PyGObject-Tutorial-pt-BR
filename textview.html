

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>15. Editor de Texto Multilinha &mdash; documentação Python GTK+ 3 Tutorial 3.4</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Índice"
              href="genindex.html"/>
        <link rel="search" title="Buscar" href="search.html"/>
    <link rel="top" title="documentação Python GTK+ 3 Tutorial 3.4" href="index.html"/>
        <link rel="next" title="16. Dialogs" href="dialogs.html"/>
        <link rel="prev" title="14. IconView" href="iconview.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Python GTK+ 3 Tutorial
          

          
          </a>

          
            
            
              <div class="version">
                3.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">1. Instalação</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">2. Começando</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">3. Noções básicas</a></li>
<li class="toctree-l1"><a class="reference internal" href="unicode.html">4. Como Lidar com Sequências de Caracteres</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">5. Containers de Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="label.html">6. Label</a></li>
<li class="toctree-l1"><a class="reference internal" href="entry.html">7. Entry</a></li>
<li class="toctree-l1"><a class="reference internal" href="button_widgets.html">8. Widgets de Botão</a></li>
<li class="toctree-l1"><a class="reference internal" href="progressbar.html">9. Barra de Progresso</a></li>
<li class="toctree-l1"><a class="reference internal" href="spinner.html">10. Spinner</a></li>
<li class="toctree-l1"><a class="reference internal" href="treeview.html">11. Widgets de Árvore e Lista</a></li>
<li class="toctree-l1"><a class="reference internal" href="cellrenderers.html">12. CellRenderers</a></li>
<li class="toctree-l1"><a class="reference internal" href="combobox.html">13. ComboBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="iconview.html">14. IconView</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">15. Editor de Texto Multilinha</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-view">15.1. A Visualização</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-model">15.2. O Modelo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tags">15.3. Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">15.4. Exemplo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dialogs.html">16. Dialogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="popover.html">17. Popovers</a></li>
<li class="toctree-l1"><a class="reference internal" href="clipboard.html">18. Clipboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="drag_and_drop.html">19. Arraste e solte</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder.html">20. Glade e Gtk.Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">21. Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="application.html">22. Aplicação</a></li>
</ul>
<p class="caption"><span class="caption-text">Descontinuada</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="menus.html">Menus</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout-table.html">Tabela</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python GTK+ 3 Tutorial</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>15. Editor de Texto Multilinha</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/textview.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="multiline-text-editor">
<h1>15. Editor de Texto Multilinha<a class="headerlink" href="#multiline-text-editor" title="Link permanente para este título">¶</a></h1>
<p>O widget <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a> pode ser usado para exibir e editar grandes quantidades de texto formatado. Como o <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TreeView.html#Gtk.TreeView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TreeView</span></code></a>, ele possui um design de modelo/visualização. Neste caso, o <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextBuffer</span></code></a> é o modelo que representa o texto que está sendo editado. Isto permite que dois ou mais widgets <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a> compartilhem o mesmo <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextBuffer</span></code></a>, e permite que os buffers de texto sejam exibidos de forma ligeiramente diferente. Ou você pode manter vários buffers de texto e optar por exibir cada um deles em momentos diferentes no mesmo widget <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a>.</p>
<div class="section" id="the-view">
<h2>15.1. A Visualização<a class="headerlink" href="#the-view" title="Link permanente para este título">¶</a></h2>
<p>O <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a> é o frontend com o qual o usuário pode adicionar, editar e excluir dados textuais. Eles são comumente usados para editar várias linhas de texto. Ao criar um <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a> ele contém seu próprio padrão <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextBuffer</span></code></a>, que você pode acessar através do método <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView.get_buffer" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextView.get_buffer()</span></code></a>.</p>
<p>Por padrão, o texto pode ser adicionado, editado e removido da <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a>. Você pode desabilitar isso chamando <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView.set_editable" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextView.set_editable()</span></code></a>. Se o texto não for editável, você geralmente deseja ocultar o cursor de texto com <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView.set_cursor_visible" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextView.set_cursor_visible()</span></code></a> também. Em alguns casos, pode ser útil definir a justificação do texto com <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView.set_justification" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextView.set_justification()</span></code></a>. O texto pode ser exibido na borda esquerda, (<a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/enums.html#Gtk.Justification.LEFT" title="(em Gtk 3.0 v3.0)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Gtk.Justification.LEFT</span></code></a>), na extremidade direita (<a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/enums.html#Gtk.Justification.RIGHT" title="(em Gtk 3.0 v3.0)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Gtk.Justification.RIGHT</span></code></a>), centralizado (<a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/enums.html#Gtk.Justification.CENTER" title="(em Gtk 3.0 v3.0)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Gtk.Justification.CENTER</span></code></a>), ou distribuído em toda a largura (<a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/enums.html#Gtk.Justification.FILL" title="(em Gtk 3.0 v3.0)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Gtk.Justification.FILL</span></code></a>).</p>
<p>Outra configuração padrão do widget <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a> é que linhas longas de texto continuarão horizontalmente até que uma quebra seja inserida. Para encapsular o texto e impedir que ele saia das bordas da tela, chame <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView.set_wrap_mode" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextView.set_wrap_mode()</span></code></a>.</p>
</div>
<div class="section" id="the-model">
<h2>15.2. O Modelo<a class="headerlink" href="#the-model" title="Link permanente para este título">¶</a></h2>
<p>O <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextBuffer</span></code></a> é o núcleo do widget <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a> e é usado para armazenar qualquer texto que esteja sendo exibido na <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextView.html#Gtk.TextView" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextView</span></code></a>. Definir e recuperar o conteúdo é possível com <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.set_text" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.set_text()</span></code></a> e <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.get_text" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.get_text()</span></code></a>. No entanto, a maior parte da manipulação de texto é realizada com <em>iteradores</em>, representados por um <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextIter.html#Gtk.TextIter" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextIter</span></code></a>. Um iterador representa uma posição entre dois caracteres no buffer de texto. Iteradores não são válidos indefinidamente; sempre que o buffer é modificado de uma maneira que afeta o conteúdo do buffer, todos os iteradores pendentes se tornam inválidos.</p>
<p>Por causa disso, os iteradores não podem ser usados para preservar posições nas modificações do buffer. Para preservar uma posição, use <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextMark.html#Gtk.TextMark" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextMark</span></code></a>. Um buffer de texto contém duas marcas internas; uma marca “insert” (que é a posição do cursor) e a marca “selection_bound”. Ambos podem ser recuperados usando <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.get_insert" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.get_insert()</span></code></a> e <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.get_selection_bound" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.get_selection_bound()</span></code></a>, respectivamente. Por padrão, a localização de um <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextMark.html#Gtk.TextMark" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextMark</span></code></a> não é mostrada. Isso pode ser alterado chamando <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextMark.html#Gtk.TextMark.set_visible" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextMark.set_visible()</span></code></a>.</p>
<p>Existem muitos métodos para recuperar um <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextIter.html#Gtk.TextIter" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextIter</span></code></a>. Por exemplo, <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.get_start_iter" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.get_start_iter()</span></code></a> retorna um iterador apontando para a primeira posição no buffer de texto, enquanto <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.get_end_iter" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.get_end_iter()</span></code></a> retorna um iterador apontando após o último caractere válido. A recuperação dos limites do texto selecionado pode ser obtida chamando <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.get_selection_bounds" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.get_selection_bounds()</span></code></a>.</p>
<p>Para inserir texto em uma posição específica use <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.insert" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.insert()</span></code></a>. Outro método útil é <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.insert_at_cursor" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.insert_at_cursor()</span></code></a> que insere texto onde quer que o cursor esteja posicionado no momento. Para remover partes do buffer de texto, use <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.delete" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.delete()</span></code></a>.</p>
<p>Além disso, <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextIter.html#Gtk.TextIter" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextIter</span></code></a> pode ser usado para localizar correspondências textuais no buffer usando <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextIter.html#Gtk.TextIter.forward_search" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextIter.forward_search()</span></code></a> e <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextIter.html#Gtk.TextIter.backward_search" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextIter.backward_search()</span></code></a>. Os iters inicial e final são usados como ponto de partida da pesquisa e avançam/retrocedem dependendo dos requisitos.</p>
</div>
<div class="section" id="tags">
<h2>15.3. Tags<a class="headerlink" href="#tags" title="Link permanente para este título">¶</a></h2>
<p>O texto em um buffer pode ser marcado com tags. Uma tag é um atributo que pode ser aplicado a um intervalo de texto. Por exemplo, uma tag pode ser chamada de “negrito” e tornar o texto dentro da tag em negrito. No entanto, o conceito de tag é mais geral do que isso; as tags não precisam afetar a aparência. Eles podem afetar o comportamento de pressionamentos de mouse e de tecla, “bloquear” um intervalo de texto para que o usuário não possa editá-lo ou inúmeras outras coisas. Uma tag é representada por um objeto <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextTag.html#Gtk.TextTag" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextTag</span></code></a>. Um <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextTag.html#Gtk.TextTag" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextTag</span></code></a> pode ser aplicado a qualquer número de intervalos de texto em qualquer número de buffers.</p>
<p>Cada tag é armazenada em <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextTagTable.html#Gtk.TextTagTable" title="(em Gtk 3.0 v3.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.TextTagTable</span></code></a>. Uma tabela de tags define um conjunto de tags que podem ser usadas juntas. Cada buffer tem uma tabela de tags associada a ele; somente tags dessa tabela de tags podem ser usadas com o buffer. No entanto, uma única tabela de tags pode ser compartilhada entre vários buffers.</p>
<p>Para especificar que algum texto no buffer deve ter uma formatação específica, você deve definir uma tag para manter as informações de formatação e, em seguida, aplicar essa tag à região do texto usando <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.create_tag" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.create_tag()</span></code></a> e <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.apply_tag" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.apply_tag()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tag</span> <span class="o">=</span> <span class="n">textbuffer</span><span class="o">.</span><span class="n">create_tag</span><span class="p">(</span><span class="s2">&quot;orange_bg&quot;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">)</span>
<span class="n">textbuffer</span><span class="o">.</span><span class="n">apply_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">start_iter</span><span class="p">,</span> <span class="n">end_iter</span><span class="p">)</span>
</pre></div>
</div>
<p>A seguir estão alguns dos estilos comuns aplicados ao texto:</p>
<blockquote>
<div><ul class="simple">
<li>Cor de fundo (propriedade “background”)</li>
<li>Cor de primeiro plano (propriedade “foreground”)</li>
<li>Sublinhado (propriedade “underline”)</li>
<li>Negrito (propriedade “weight”)</li>
<li>Itálico (propriedade “style”)</li>
<li>Tachado (propriedade “strikethrough”)</li>
<li>Justificação (propriedade de “justification”)</li>
<li>Tamanho (propriedades “size” e “size-points”)</li>
<li>Quebra automática de texto (propriedade “wrap-mode”)</li>
</ul>
</div></blockquote>
<p>Você também pode excluir tags particulares posteriormente usando <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.remove_tag" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.remove_tag()</span></code></a> ou excluir todas as tags em uma determinada região chamando <a class="reference external" href="https://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.remove_all_tags" title="(em Gtk 3.0 v3.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.TextBuffer.remove_all_tags()</span></code></a>.</p>
</div>
<div class="section" id="example">
<h2>15.4. Exemplo<a class="headerlink" href="#example" title="Link permanente para este título">¶</a></h2>
<img alt="_images/textview_example.png" src="_images/textview_example.png" />
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gi</span>
<span class="n">gi</span><span class="o">.</span><span class="n">require_version</span><span class="p">(</span><span class="s1">&#39;Gtk&#39;</span><span class="p">,</span> <span class="s1">&#39;3.0&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">gi.repository</span> <span class="k">import</span> <span class="n">Gtk</span><span class="p">,</span> <span class="n">Pango</span>

<span class="k">class</span> <span class="nc">SearchDialog</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Dialog</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">Dialog</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Search&quot;</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">DialogFlags</span><span class="o">.</span><span class="n">MODAL</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="p">(</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_FIND</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ResponseType</span><span class="o">.</span><span class="n">OK</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_CANCEL</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ResponseType</span><span class="o">.</span><span class="n">CANCEL</span><span class="p">))</span>

        <span class="n">box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_content_area</span><span class="p">()</span>

        <span class="n">label</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s2">&quot;Insert text you want to search for:&quot;</span><span class="p">)</span>
        <span class="n">box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Entry</span><span class="p">()</span>
        <span class="n">box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">TextViewWindow</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Window</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;TextView Example&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_default_size</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">350</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Grid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_textview</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_toolbar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_buttons</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">create_toolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">toolbar</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Toolbar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">toolbar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">button_bold</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ToolButton</span><span class="p">()</span>
        <span class="n">button_bold</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;format-text-bold-symbolic&quot;</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">button_bold</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">button_italic</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ToolButton</span><span class="p">()</span>
        <span class="n">button_italic</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;format-text-italic-symbolic&quot;</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">button_italic</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">button_underline</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ToolButton</span><span class="p">()</span>
        <span class="n">button_underline</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;format-text-underline-symbolic&quot;</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">button_underline</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

        <span class="n">button_bold</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;clicked&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_button_clicked</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_bold</span><span class="p">)</span>
        <span class="n">button_italic</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;clicked&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_button_clicked</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_italic</span><span class="p">)</span>
        <span class="n">button_underline</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;clicked&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_button_clicked</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_underline</span><span class="p">)</span>

        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">SeparatorToolItem</span><span class="p">(),</span> <span class="mi">3</span><span class="p">)</span>

        <span class="n">radio_justifyleft</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">RadioToolButton</span><span class="p">()</span>
        <span class="n">radio_justifyleft</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;format-justify-left-symbolic&quot;</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">radio_justifyleft</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="n">radio_justifycenter</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">RadioToolButton</span><span class="o">.</span><span class="n">new_from_widget</span><span class="p">(</span><span class="n">radio_justifyleft</span><span class="p">)</span>
        <span class="n">radio_justifycenter</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;format-justify-center-symbolic&quot;</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">radio_justifycenter</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

        <span class="n">radio_justifyright</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">RadioToolButton</span><span class="o">.</span><span class="n">new_from_widget</span><span class="p">(</span><span class="n">radio_justifyleft</span><span class="p">)</span>
        <span class="n">radio_justifyright</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;format-justify-right-symbolic&quot;</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">radio_justifyright</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

        <span class="n">radio_justifyfill</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">RadioToolButton</span><span class="o">.</span><span class="n">new_from_widget</span><span class="p">(</span><span class="n">radio_justifyleft</span><span class="p">)</span>
        <span class="n">radio_justifyfill</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;format-justify-fill-symbolic&quot;</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">radio_justifyfill</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

        <span class="n">radio_justifyleft</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_justify_toggled</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">Justification</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="n">radio_justifycenter</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_justify_toggled</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">Justification</span><span class="o">.</span><span class="n">CENTER</span><span class="p">)</span>
        <span class="n">radio_justifyright</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_justify_toggled</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">Justification</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">)</span>
        <span class="n">radio_justifyfill</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_justify_toggled</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">Justification</span><span class="o">.</span><span class="n">FILL</span><span class="p">)</span>

        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">SeparatorToolItem</span><span class="p">(),</span> <span class="mi">8</span><span class="p">)</span>

        <span class="n">button_clear</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ToolButton</span><span class="p">()</span>
        <span class="n">button_clear</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;edit-clear-symbolic&quot;</span><span class="p">)</span>
        <span class="n">button_clear</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;clicked&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_clear_clicked</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">button_clear</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>

        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">SeparatorToolItem</span><span class="p">(),</span> <span class="mi">10</span><span class="p">)</span>

        <span class="n">button_search</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ToolButton</span><span class="p">()</span>
        <span class="n">button_search</span><span class="o">.</span><span class="n">set_icon_name</span><span class="p">(</span><span class="s2">&quot;system-search-symbolic&quot;</span><span class="p">)</span>
        <span class="n">button_search</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;clicked&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_search_clicked</span><span class="p">)</span>
        <span class="n">toolbar</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">button_search</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_textview</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">scrolledwindow</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ScrolledWindow</span><span class="p">()</span>
        <span class="n">scrolledwindow</span><span class="o">.</span><span class="n">set_hexpand</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">scrolledwindow</span><span class="o">.</span><span class="n">set_vexpand</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">scrolledwindow</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">textview</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">TextView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textview</span><span class="o">.</span><span class="n">get_buffer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s2">&quot;This is some text inside of a Gtk.TextView. &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;Select text and click one of the buttons &#39;bold&#39;, &#39;italic&#39;, &quot;</span>
            <span class="o">+</span> <span class="s2">&quot;or &#39;underline&#39; to modify the text accordingly.&quot;</span><span class="p">)</span>
        <span class="n">scrolledwindow</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textview</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tag_bold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">create_tag</span><span class="p">(</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">Pango</span><span class="o">.</span><span class="n">Weight</span><span class="o">.</span><span class="n">BOLD</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag_italic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">create_tag</span><span class="p">(</span><span class="s2">&quot;italic&quot;</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">Pango</span><span class="o">.</span><span class="n">Style</span><span class="o">.</span><span class="n">ITALIC</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag_underline</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">create_tag</span><span class="p">(</span><span class="s2">&quot;underline&quot;</span><span class="p">,</span>
            <span class="n">underline</span><span class="o">=</span><span class="n">Pango</span><span class="o">.</span><span class="n">Underline</span><span class="o">.</span><span class="n">SINGLE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag_found</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">create_tag</span><span class="p">(</span><span class="s2">&quot;found&quot;</span><span class="p">,</span>
            <span class="n">background</span><span class="o">=</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">check_editable</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">CheckButton</span><span class="p">(</span><span class="s2">&quot;Editable&quot;</span><span class="p">)</span>
        <span class="n">check_editable</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">check_editable</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_editable_toggled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">check_editable</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">check_cursor</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">CheckButton</span><span class="p">(</span><span class="s2">&quot;Cursor Visible&quot;</span><span class="p">)</span>
        <span class="n">check_cursor</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">check_editable</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_cursor_toggled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">attach_next_to</span><span class="p">(</span><span class="n">check_cursor</span><span class="p">,</span> <span class="n">check_editable</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">PositionType</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">radio_wrapnone</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">RadioButton</span><span class="o">.</span><span class="n">new_with_label_from_widget</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;No Wrapping&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">radio_wrapnone</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">radio_wrapchar</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">RadioButton</span><span class="o">.</span><span class="n">new_with_label_from_widget</span><span class="p">(</span>
            <span class="n">radio_wrapnone</span><span class="p">,</span> <span class="s2">&quot;Character Wrapping&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">attach_next_to</span><span class="p">(</span><span class="n">radio_wrapchar</span><span class="p">,</span> <span class="n">radio_wrapnone</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">PositionType</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">radio_wrapword</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">RadioButton</span><span class="o">.</span><span class="n">new_with_label_from_widget</span><span class="p">(</span>
            <span class="n">radio_wrapnone</span><span class="p">,</span> <span class="s2">&quot;Word Wrapping&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">attach_next_to</span><span class="p">(</span><span class="n">radio_wrapword</span><span class="p">,</span> <span class="n">radio_wrapchar</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">PositionType</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">radio_wrapnone</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_wrap_toggled</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">WrapMode</span><span class="o">.</span><span class="n">NONE</span><span class="p">)</span>
        <span class="n">radio_wrapchar</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_wrap_toggled</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">WrapMode</span><span class="o">.</span><span class="n">CHAR</span><span class="p">)</span>
        <span class="n">radio_wrapword</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;toggled&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_wrap_toggled</span><span class="p">,</span>
            <span class="n">Gtk</span><span class="o">.</span><span class="n">WrapMode</span><span class="o">.</span><span class="n">WORD</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_button_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">get_selection_bounds</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">bounds</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">apply_tag</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_clear_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">get_start_iter</span><span class="p">()</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">get_end_iter</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">remove_all_tags</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_editable_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textview</span><span class="o">.</span><span class="n">set_editable</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">get_active</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">on_cursor_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textview</span><span class="o">.</span><span class="n">set_cursor_visible</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="n">get_active</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">on_wrap_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textview</span><span class="o">.</span><span class="n">set_wrap_mode</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_justify_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">justification</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textview</span><span class="o">.</span><span class="n">set_justification</span><span class="p">(</span><span class="n">justification</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_search_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">SearchDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ResponseType</span><span class="o">.</span><span class="n">OK</span><span class="p">:</span>
            <span class="n">cursor_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">get_insert</span><span class="p">()</span>
            <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">get_iter_at_mark</span><span class="p">(</span><span class="n">cursor_mark</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">start</span><span class="o">.</span><span class="n">get_offset</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">get_char_count</span><span class="p">():</span>
                <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">get_start_iter</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">search_and_mark</span><span class="p">(</span><span class="n">dialog</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">get_text</span><span class="p">(),</span> <span class="n">start</span><span class="p">)</span>

        <span class="n">dialog</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">search_and_mark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">start</span><span class="p">):</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">get_end_iter</span><span class="p">()</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">start</span><span class="o">.</span><span class="n">forward_search</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">match_start</span><span class="p">,</span> <span class="n">match_end</span> <span class="o">=</span> <span class="n">match</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">textbuffer</span><span class="o">.</span><span class="n">apply_tag</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag_found</span><span class="p">,</span> <span class="n">match_start</span><span class="p">,</span> <span class="n">match_end</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">search_and_mark</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">match_end</span><span class="p">)</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">TextViewWindow</span><span class="p">()</span>
<span class="n">win</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;destroy&quot;</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">)</span>
<span class="n">win</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
<span class="n">Gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dialogs.html" class="btn btn-neutral float-right" title="16. Dialogs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="iconview.html" class="btn btn-neutral" title="14. IconView" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright GNU Free Documentation License 1.3.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>